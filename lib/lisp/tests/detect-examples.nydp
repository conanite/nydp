(examples-for detect
  ("returns first matching item in a list"
   (detect (fn (x) (eq? (len x) 2))
           (list "foo" "bar" "xx" "pp"))
   "xx")

  ("returns nil when nothing matches"
   (detect (fn (x) (eq? (len x) 20))
           (list "foo" "bar" "xx" "pp"))
   nil)

  ("returns t if nil is the matching item (warning: anomalous behaviour)"
   (detect no (list "foo" "bar" nil "pp"))
   t)

  ("finds first non-nil item using x1"
   (detect x1 (list nil nil "foo" "bar" nil "pp"))
   "foo")

  ("returns item if it's an atom and matches"
   (detect (fn (x) (eq? (len x) 2)) "zz")
   "zz")

  ("returns nil if it's an atom and doesn't match"
   (detect (fn (x) (eq? (len x) 20))
           "zz")
   nil))
